@model List<Iot_WebApp.Models.SensorData>
@{
    ViewData["Title"] = "Home Page";

    // Create PersianCalendar instance
    var persianCalendar = new System.Globalization.PersianCalendar();
}

<!-- Include Bootstrap CSS -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<!-- Include your custom CSS -->
<link href="~/css/custom.css" rel="stylesheet">

<h1 class="mt-5">مانیتورینگ دما و رطوبت </h1>

<div class="table-responsive">
    <table class="table table-striped table-bordered mt-4">
        <thead class="thead-dark">
            <tr>
                <th>(دما(سلسیوس</th>
                <th>(رطوبت(درصد</th>
                <th>مورخ</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                // Convert Gregorian date to Shamsi date
                var shamsiDate = $"{persianCalendar.GetYear(item.Timestamp)}/{persianCalendar.GetMonth(item.Timestamp).ToString("00")}/{persianCalendar.GetDayOfMonth(item.Timestamp).ToString("00")} {item.Timestamp:HH:mm:ss}";

                <tr>
                    <td>@item.Temperature</td>
                    <td>@item.Humidity</td>
                    <td>@shamsiDate</td>
                </tr>
            }
        </tbody>
    </table>
</div>
